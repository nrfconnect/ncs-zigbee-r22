<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>Developing with ZBOSS for Zigbee : Sleep API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Developing with ZBOSS for Zigbee
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__sleep__api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Sleep API<div class="ingroups"><a class="el" href="group__api__zb.html">Zigbee stack API</a> &raquo; <a class="el" href="group__ll.html">ZBOSS framework</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga3ae3ba35fc587158ea5747de97cbc095"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sleep__api.html#ga3ae3ba35fc587158ea5747de97cbc095">ZB_SCHED_SLEEP_THRESHOLD_MS</a>&#160;&#160;&#160;20U</td></tr>
<tr class="separator:ga3ae3ba35fc587158ea5747de97cbc095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23e1105be3dcdfc4c0af6a6a28e5c1d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sleep__api.html#ga23e1105be3dcdfc4c0af6a6a28e5c1d1">ZB_MAXIMUM_SLEEP_THRESHOLD_MS</a>&#160;&#160;&#160;86400000U</td></tr>
<tr class="separator:ga23e1105be3dcdfc4c0af6a6a28e5c1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaad0eff89b2a0ea803f70d7888bea355e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sleep__api.html#gaad0eff89b2a0ea803f70d7888bea355e">zb_sleep_set_threshold</a> (<a class="el" href="group__base__types.html#ga964947a10fa0ad0bd6df7bd91ecfac9c">zb_uint32_t</a> threshold_ms)</td></tr>
<tr class="separator:gaad0eff89b2a0ea803f70d7888bea355e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab7fc1cf39580877f846941c291a5326"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__base__types.html#ga964947a10fa0ad0bd6df7bd91ecfac9c">zb_uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sleep__api.html#gaab7fc1cf39580877f846941c291a5326">zb_get_sleep_threshold</a> (void)</td></tr>
<tr class="separator:gaab7fc1cf39580877f846941c291a5326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0cf2fbac3d63cb53ded5a1860c845f70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sleep__api.html#ga0cf2fbac3d63cb53ded5a1860c845f70">zb_sleep_now</a> (void)</td></tr>
<tr class="separator:ga0cf2fbac3d63cb53ded5a1860c845f70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<dl class="section user"><dt>Power Saving for ZED</dt><dd>For sleepy end devices (RxOffWhenIdle = TRUE), ZBOSS provides a mechanism for power saving. ZBOSS scheduler tracks the callback queue and if there is no immediate callback for execution and there is no outgoing packet on the MAC level, a special signal ZB_COMMON_SIGNAL_CAN_SLEEP is sent to an application. The "can sleep" signal has a sleep time parameter that indicates allowed sleep duration in milliseconds.</dd></dl>
<p>Sleep duration value is based on the time remaining before the first alarm is called or it is set to 10 seconds if there are no alarms in the queue. Upon receiving ZB_COMMON_SIGNAL_CAN_SLEEP the application analyzes its internal state and decides whether to enter the sleep mode or not. To go to the sleep mode, the application should call the <a class="el" href="group__sleep__api.html#ga0cf2fbac3d63cb53ded5a1860c845f70">zb_sleep_now()</a> function. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga23e1105be3dcdfc4c0af6a6a28e5c1d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23e1105be3dcdfc4c0af6a6a28e5c1d1">&#9670;&nbsp;</a></span>ZB_MAXIMUM_SLEEP_THRESHOLD_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZB_MAXIMUM_SLEEP_THRESHOLD_MS&#160;&#160;&#160;86400000U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum sleep threshold. </p>

</div>
</div>
<a id="ga3ae3ba35fc587158ea5747de97cbc095"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ae3ba35fc587158ea5747de97cbc095">&#9670;&nbsp;</a></span>ZB_SCHED_SLEEP_THRESHOLD_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZB_SCHED_SLEEP_THRESHOLD_MS&#160;&#160;&#160;20U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default sleep threshold. Do not sleep when it is less then 1 Beacon Interval to wake up. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaab7fc1cf39580877f846941c291a5326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaab7fc1cf39580877f846941c291a5326">&#9670;&nbsp;</a></span>zb_get_sleep_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__base__types.html#ga964947a10fa0ad0bd6df7bd91ecfac9c">zb_uint32_t</a> zb_get_sleep_threshold </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get sleep threshold value from stack. </p><dl class="section return"><dt>Returns</dt><dd>threshold value in milliseconds </dd></dl>

</div>
</div>
<a id="ga0cf2fbac3d63cb53ded5a1860c845f70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0cf2fbac3d63cb53ded5a1860c845f70">&#9670;&nbsp;</a></span>zb_sleep_now()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zb_sleep_now </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Blocking function responsible for putting device into sleep mode. </p>

</div>
</div>
<a id="gaad0eff89b2a0ea803f70d7888bea355e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad0eff89b2a0ea803f70d7888bea355e">&#9670;&nbsp;</a></span>zb_sleep_set_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a> zb_sleep_set_threshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__base__types.html#ga964947a10fa0ad0bd6df7bd91ecfac9c">zb_uint32_t</a>&#160;</td>
          <td class="paramname"><em>threshold_ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set sleep threshold on device; when scheduler detects that device can be put in sleep mode it will notify application with signal </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__zb__comm__signals.html#gae4c50bae666f2c4dd8ac710481856a6e">ZB_COMMON_SIGNAL_CAN_SLEEP</a>. Device can not be put into sleep mode when sleep interval less than this threshold.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threshold_ms</td><td>- sleep threshold in milliseconds If threshold is 0, means zero threshold, application will be notified each time when stack is ready to sleep (no immediate callbacks in queue). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RET_OK if new threshold is valid and applied </dd>
<dd>
RET_ERROR if user wants to set threshold greater that <a class="el" href="group__sleep__api.html#ga23e1105be3dcdfc4c0af6a6a28e5c1d1">ZB_MAXIMUM_SLEEP_THRESHOLD_MS</a> or lesser than ZB_SCHED_SLEEP_THRESHOLD_MS. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Thu Nov 14 2024" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>
