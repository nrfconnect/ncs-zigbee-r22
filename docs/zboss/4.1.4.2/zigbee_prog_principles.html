<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>Developing with ZBOSS for Zigbee : Programming principles</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Developing with ZBOSS for Zigbee
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('zigbee_prog_principles.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Programming principles </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#zigbee_app_structure">Application structure</a><ul><li class="level2"><a href="#zigbee_types">Zigbee type definitions</a></li>
<li class="level2"><a href="#zigbee_sdk_h_files">Zigbee stack header files</a></li>
<li class="level2"><a href="#zigbee_multitasking">Zigbee stack multitasking (scheduler)</a><ul><li class="level3"><a href="#zigbee_multitasking_callback">Callbacks</a></li>
<li class="level3"><a href="#zigbee_multitasking_alarms">Timer alarms</a></li>
<li class="level3"><a href="#zigbee_multitasking_api">Scheduler API</a></li>
</ul>
</li>
<li class="level2"><a href="#zigbee_stack_memory_mgmt">Zigbee stack memory management subsystem</a></li>
<li class="level2"><a href="#zigbee_time">Time subsystem</a></li>
</ul>
</li>
<li class="level1"><a href="#zigbee_debugging">Debugging</a></li>
<li class="level1"><a href="#zigbee_power_optimization">Power saving feature</a><ul><li class="level2"><a href="#zigbee_power_optimization_sleepy">Configuring sleepy behavior for end devices</a></li>
</ul>
</li>
<li class="level1"><a href="#zigbee_keep_alive_mechanism">End device keep alive</a></li>
<li class="level1"><a href="#zigbee_data_polling_mechanism">Data polling mechanism</a><ul><li class="level2"><a href="#zigbee_data_polling_mechanism_turbo">Turbo poll</a></li>
</ul>
</li>
<li class="level1"><a href="#zigbee_production_config">Production configuration</a></li>
</ul>
</div>
<div class="textblock"><p>The ZBOSS stack provides the following services for the Zigbee application developer:</p><ul>
<li>Zigbee Cluster Library (ZCL) definition and processing,</li>
<li>Commissioning according to the BDB profile,</li>
<li>Zigbee Device Object (ZDO) services,</li>
<li>Internal Zigbee stack data structures,</li>
<li>Lower level application framework: multitasking and memory management.</li>
</ul>
<hr  />
<h1><a class="anchor" id="zigbee_app_structure"></a>
Application structure</h1>
<p>The SDK provides header files and libraries for C programming language. This means that applications must be implemented using C or C++.</p>
<p>The typical application source must:</p><ul>
<li>Include SDK header or headers.</li>
<li>Declare global ZCL data: attribute lists, clusters, endpoints, ZCL context.</li>
<li>Register ZCL endpoints and ZCL device context.</li>
<li>Optionally, set up defaults for the commissioning: network role, stack parameters (64-bit long address, security key, maximum number of children, etc.).</li>
<li>Start ZBOSS threads with <code>zigbee_enable</code>.</li>
<li>Implement <a class="el" href="group__zb__comm__signals.html#gae05c0ff285cfd03e0997fe438e8047fc">zboss_signal_handler()</a> to handle the commissioning events.</li>
<li>Implement ZCL device callback.</li>
<li>Implement ZCL-specific cluster command handler.</li>
</ul>
<h2><a class="anchor" id="zigbee_types"></a>
Zigbee type definitions</h2>
<p>The stack uses a set of platform-independent type definitions such as:</p><ul>
<li>common C types (char, integer, void, etc.),</li>
<li>specific types for core and Zigbee functionalities.</li>
</ul>
<p>All ZBOSS type names start with the prefix <code>"zb_"</code>.</p>
<h2><a class="anchor" id="zigbee_sdk_h_files"></a>
Zigbee stack header files</h2>
<p>The application must include the header file <code>zboss_api.h</code>, and do so before any other ZBOSS header files. This file contains most of the required routines to start the application.</p>
<h2><a class="anchor" id="zigbee_multitasking"></a>
Zigbee stack multitasking (scheduler)</h2>
<p>The stack uses a cooperative multitasking model. The main component that provides multitasking capabilities is the scheduler.</p>
<h3><a class="anchor" id="zigbee_multitasking_callback"></a>
Callbacks</h3>
<p>There is no "task" abstraction in the scheduler; it uses "callback" instead. The callback has to match one of the following types:</p><ul>
<li><code>typedef void (* zb_callback_t)(<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> param);</code></li>
<li><code>typedef void (* zb_callback2_t)(<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> param, <a class="el" href="group__base__types.html#ga83793366ad4d54e8b65840d82a751498">zb_uint16_t</a> cb_param);</code></li>
</ul>
<p>Running a task in the scheduler simply executes a callback function.</p>
<p>Each callback function can schedule one or more callback functions for execution through the scheduler. The scheduled callbacks are stored in the internal scheduler queue. This queue is handled in the scheduler main loop: the callbacks are executed one-by-one in the FIFO order. If there is currently no callback to execute, the scheduler can put the device into sleep mode (if so configured).</p>
<p>Callbacks are scheduled for execution with:</p><ul>
<li><a class="el" href="group__sched.html#ga27e890246162c45f4d8ad45350e2c912">ZB_SCHEDULE_APP_CALLBACK</a> for the callbacks with one parameter,</li>
<li><a class="el" href="group__sched.html#ga6055ff0ff8b3d27f894ab6b12b229bd8">ZB_SCHEDULE_APP_CALLBACK2</a> for the callbacks with two parameters.</li>
</ul>
<p>A common practice is to specify a buffer ID as the first (or as the single) parameter for the callback. Scheduling a callback does not block the currently running function, as it is a fast non-blocking operation. More than one callback can be scheduled in succession. If there is no other callback in the queue, the scheduled callback is executed immediately after the current callback is finished.</p>
<h3><a class="anchor" id="zigbee_multitasking_alarms"></a>
Timer alarms</h3>
<p>The timer functionality uses the scheduler infrastructure and is implemented with alarms. An alarm is a callback that is scheduled for execution with a defined time delay. The time delay is specified during the scheduling of the alarm and guarantees that the alarm callback function is called not earlier than specified by the delay parameter.</p>
<dl class="section note"><dt>Note</dt><dd>Precise timing is not guaranteed: the alarm callback can be called later than the defined time delay.</dd></dl>
<p>There are API primitives provided to work with the alarms:</p><ul>
<li><a class="el" href="group__sched.html#ga80106ad089597d7c4d1530aa760af7f1">ZB_SCHEDULE_APP_ALARM</a> is used to schedule a callback with a given parameter and a defined timeout. (Similar to callbacks, alarms are executed in the main scheduler loop.)</li>
<li><a class="el" href="group__sched.html#ga70274b2f18b641663cdc1452dddb17a3">ZB_SCHEDULE_APP_ALARM_CANCEL</a> is used to cancel a previously scheduled alarm.</li>
</ul>
<h3><a class="anchor" id="zigbee_multitasking_api"></a>
Scheduler API</h3>
<p>The following table lists the Scheduler API macros:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Parameters </th><th class="markdownTableHeadNone">Return value </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__sched.html#ga27e890246162c45f4d8ad45350e2c912">ZB_SCHEDULE_APP_CALLBACK(func, param)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>func</code> &ndash; function to execute.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>param</code> &ndash; callback parameter &ndash; usually a buffer ID. </td><td class="markdownTableBodyNone"><code>RET_OK</code> or <code>RET_OVERFLOW</code>. </td><td class="markdownTableBodyNone">Schedule a callback function with one parameter for execution.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__sched.html#ga6055ff0ff8b3d27f894ab6b12b229bd8">ZB_SCHEDULE_APP_CALLBACK2(func, param, user_param)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>func</code> &ndash; function to execute.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>param</code> &ndash; callback parameter. <br  />
<a class="el" href="group__base__types.html#ga83793366ad4d54e8b65840d82a751498">zb_uint16_t</a> <code>user_param</code> &ndash; user parameter. </td><td class="markdownTableBodyNone"><code>RET_OK</code> or <code>RET_OVERFLOW</code>. </td><td class="markdownTableBodyNone">Schedule a callback function with two parameters for execution.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__sched.html#ga80106ad089597d7c4d1530aa760af7f1">ZB_SCHEDULE_APP_ALARM(func, param, timeout_bi)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>func</code> &ndash; function to execute.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>param</code> &ndash; callback parameter. <br  />
<a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>timeout_bi</code> &ndash; timeout, in beacon intervals. </td><td class="markdownTableBodyNone"><code>RET_OK</code> or <code>RET_OVERFLOW</code>. </td><td class="markdownTableBodyNone">Schedule an alarm for execution in the main scheduler loop: a callback with one parameter to be executed after a delay defined by the timeout value.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__sched.html#ga70274b2f18b641663cdc1452dddb17a3">ZB_SCHEDULE_APP_ALARM_CANCEL(func, param)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>func</code> &ndash; scheduled function to cancel.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>param</code> &ndash; callback parameter. </td><td class="markdownTableBodyNone"><code>RET_OK</code> or <code>RET_OVERFLOW</code>. </td><td class="markdownTableBodyNone">Cancel previously scheduled alarm.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gaa06c6fd4ce01e5687e226d7ac81a4ed8">ZB_SCHEDULE_GET_ALARM_TIME(func, param, timeout_bi)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>func</code> &ndash; function to execute.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>param</code> &ndash; callback parameter <br  />
<a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>timeout_bi</code> &ndash; time left for an execution, in beacon intervals. </td><td class="markdownTableBodyNone"><code>RET_OK</code> or <code>RET_NOT_FOUND</code>. </td><td class="markdownTableBodyNone">Check whether an alarm was scheduled and return time left for the callback execution.  </td></tr>
</table>
<center><b>Scheduler API calls</b></center><dl class="section note"><dt>Note</dt><dd>Except for the scheduler API, the Zigbee stack API is not thread-safe. This means that calls to the Zigbee API must be invoked through scheduler callbacks or from the same thread that runs the scheduler loop. In NCS, the scheduler API is overloaded by functions that make it interrupt- and thread-safe. These functions can be found in <code>nrf/subsys/zigbee/osif/zb_nrf_platform.h</code>.</dd></dl>
<p>The following examples demonstrate the usage of Zigbee multitasking with two functions executing each other in an infinite loop. The first function executes immediately. The second function executes after a 10-second delay.</p><ul>
<li><em>Example 1.</em> Calling Multitasking Scheduler in main void. <div class="fragment"><div class="line"><span class="keywordtype">void</span> func1(<a class="code" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> param)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__sched.html#ga27e890246162c45f4d8ad45350e2c912">ZB_SCHEDULE_APP_CALLBACK</a>(func2, param);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> func2(<a class="code" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> param)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__sched.html#ga80106ad089597d7c4d1530aa760af7f1">ZB_SCHEDULE_APP_ALARM</a>(func1, param, 10 * <a class="code" href="group__time.html#ga0b55ee2d596a314bb6e985149c17cdad">ZB_TIME_ONE_SECOND</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__zb__general__start.html#ga2d56595208dc8b6383ed99ee96b03d5c">ZB_INIT</a>();</div>
<div class="line"> </div>
<div class="line">    func1(1);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a> zb_err_code = <a class="code" href="group__zb__general__start.html#ga31b4d46033aaf6a400409d03bd40d392">zboss_start</a>();</div>
<div class="line">    ZB_ERROR_CHECK(zb_err_code);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span>(1)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__zb__general__main__loop.html#gab9f8bb77c5348ee1dea12ec1026517b1">zboss_main_loop_iteration</a>();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><em>Example 2.</em> Calling Multitasking Scheduler in <a class="el" href="group__zb__comm__signals.html#gae05c0ff285cfd03e0997fe438e8047fc">zboss_signal_handler</a>. <div class="fragment"><div class="line"><span class="keywordtype">void</span> func1(<a class="code" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> param)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__sched.html#ga27e890246162c45f4d8ad45350e2c912">ZB_SCHEDULE_APP_CALLBACK</a>(func2, param);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> func2(<a class="code" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> param)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__sched.html#ga80106ad089597d7c4d1530aa760af7f1">ZB_SCHEDULE_APP_ALARM</a>(func1, param, 10 * <a class="code" href="group__time.html#ga0b55ee2d596a314bb6e985149c17cdad">ZB_TIME_ONE_SECOND</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__zb__general__start.html#ga2d56595208dc8b6383ed99ee96b03d5c">ZB_INIT</a>();</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a> zb_err_code = <a class="code" href="group__zb__general__start.html#ga31b4d46033aaf6a400409d03bd40d392">zboss_start</a>();</div>
<div class="line">    ZB_ERROR_CHECK(zb_err_code);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span>(1)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__zb__general__main__loop.html#gab9f8bb77c5348ee1dea12ec1026517b1">zboss_main_loop_iteration</a>();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__zb__comm__signals.html#gae05c0ff285cfd03e0997fe438e8047fc">zboss_signal_handler</a>(<a class="code" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> param)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structzb__zdo__app__signal__hdr__s.html">zb_zdo_app_signal_hdr_t</a> * p_sg_p = NULL;</div>
<div class="line">    zb_zdo_app_signal_t       sig    = <a class="code" href="group__zb__comm__signals.html#ga03ab4c87fbcc7cf8e12bbfa9cb8a3be6">zb_get_app_signal</a>(param, &amp;p_sg_p);</div>
<div class="line">    <a class="code" href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a>                  status = <a class="code" href="group__zb__comm__signals.html#ga92b8d5cdf1c243e1c47e72fbd0e14083">ZB_GET_APP_SIGNAL_STATUS</a>(param);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (status == 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">switch</span>(sig)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__zb__comm__signals.html#ga8de605f3e2666ce3d6ea3b5419f73dc9">ZB_ZDO_SIGNAL_DEFAULT_START</a>:</div>
<div class="line">            <span class="comment">/* fall-through */</span></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__zb__comm__signals.html#gab55565980ef0580712f8dc160b01ea06">ZB_BDB_SIGNAL_DEVICE_FIRST_START</a>:</div>
<div class="line">            <span class="comment">/* fall-through */</span></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__zb__comm__signals.html#ga3e9d86f42d2c6c27240f423a40fb152b">ZB_BDB_SIGNAL_DEVICE_REBOOT</a>:</div>
<div class="line">            <span class="comment">/* fall-through */</span></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__zb__comm__signals.html#gab2b9e7a13fd471d7bb642655d825a04e">ZB_ZDO_SIGNAL_SKIP_STARTUP</a>:</div>
<div class="line">                <span class="comment">/* Device started OK */</span></div>
<div class="line">                func1(1);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="comment">/* Unhandled signal. For more information see: zb_zdo_app_signal_type_e and zb_ret_e */</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Device failed to start */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (param)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__buf.html#ga788a473df6d535c19f5da0d142d4fa01">zb_buf_free</a>(param);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="zigbee_stack_memory_mgmt"></a>
Zigbee stack memory management subsystem</h2>
<p>The Zigbee stack uses static memory allocation for its internal data structures (the memory is not allocated dynamically at runtime). The memory management system provides predictable memory usage and minimizes data copying at runtime when possible. The internal stack data structures are usually invisible to the application.</p>
<p>The main data structure visible for the application is the memory buffer, which transfers packets and parameters between the application and stack layers.</p>
<p>The stack uses a predefined pool of memory buffers of a fixed size and has a number of default presets to define the size of the memory buffer pool. You can configure the pool by using one of the following header files:</p><ul>
<li>zb_mem_config_min.h sets the minimal memory buffer pool of 20 buffers.</li>
<li>zb_mem_config_med.h sets the medium memory buffer pool of 32 buffers.</li>
<li>zb_mem_config_max.h sets the maximum memory buffer pool of 48 buffers.</li>
</ul>
<p>A memory buffer consists of a header and a data buffer. The memory buffer size equals 128 bytes + buffer tail with a set of parameters. This is enough to hold a single Zigbee packet or an APS fragment. When the APS fragmentation is required on rare occasions, the ZBOSS stack uses extended buffers.</p>
<dl class="section note"><dt>Note</dt><dd>The APS fragmentation is an optional feature of ZBOSS.</dd></dl>
<p>The application or the stack function can allocate or release a single memory buffer from the pool on demand. Memory buffer allocation is a blocking operation: ZBOSS stack calls the user's callback when the buffer becomes available.</p>
<p>The application must use <a class="el" href="group__buf.html#ga284f25d25ef8a911d00dc79bea80ce42">zb_buf_get_out_delayed()</a> or <a class="el" href="group__buf.html#gad0f373a65f012c04317b6a602823e2aa">zb_buf_get_in_delayed()</a> calls to allocate a new buffer. When a buffer becomes available, the delayed buffer allocation makes a callback call through the scheduler.</p>
<p>Logically, the memory buffers are divided into two types:</p><ul>
<li>RX buffers for incoming packets;</li>
<li>TX buffers for outgoing packets.</li>
</ul>
<p>This separation prevents allocating all memory buffers to only one type of buffer. For example, if all buffers are only TX buffers and all are in use waiting for an ACK packet, no ACK packet will be received because no RX buffer is available. To prevent this situation, the stack stops allocating TX buffers when half of the buffer pool is allocated to TX buffers. The same rule applies to allocating RX buffers.</p>
<p>Most of the stack functions require some parameters and some data (usually Zigbee packet or its fragment). Both parameters and data are passed to the API in a single memory buffer. Call parameters are stored in the tail of the buffer, while the data section is stored at the head of the buffer. Both the caller and the called functions must be aware of the parameter types.</p>
<p>For setting parameters and getting them from the buffer, <a class="el" href="group__buf.html#gaf7e0718a3bb63059a2626ac98b54d65d">ZB_BUF_GET_PARAM()</a> is used.</p>
<p>The following buffer operations are available in a Zigbee application:</p><ul>
<li>Allocate and deallocate buffers.</li>
<li>Allocate or deallocate space inside a buffer.</li>
<li>Add data at the head or the tail of a payload.</li>
<li>Read payload data (get data start, get data length, get buffer parameters).</li>
</ul>
<p>To reserve a space in the memory buffer, use the following methods:</p><ul>
<li><a class="el" href="group__buf.html#ga71af155e981aa06d5a56db6b46d8cc7c">zb_buf_initial_alloc()</a></li>
<li><a class="el" href="group__buf.html#gaa04531caf208df1bd8cc5cc920382f85">zb_buf_alloc_left()</a></li>
<li><a class="el" href="group__buf.html#ga3be3fececb70e81b7541a47e915fafc2">zb_buf_alloc_right()</a></li>
</ul>
<p>The following table lists the available memory management API macros.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Parameters </th><th class="markdownTableHeadNone">Return value </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga97fe9fcc0124718cc25c3710b752b8fd">zb_buf_begin(bufid)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID. </td><td class="markdownTableBodyNone">void <code>*data</code> &ndash; data begin. </td><td class="markdownTableBodyNone">Get a pointer to the first allocated data element in the data buffer.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga4c187cf4fb6d5edbbb400bff57f6073e">zb_buf_len(bufid)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID. </td><td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#gaa0617d5f95ca24aef1c8ebf176eea245">zb_uint_t</a> <code>length</code> &ndash; data length. </td><td class="markdownTableBodyNone">Get the allocated data size.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga71af155e981aa06d5a56db6b46d8cc7c">zb_buf_initial_alloc(bufid, size)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>size</code> &ndash; size to allocate. </td><td class="markdownTableBodyNone">void <code>*data</code> &ndash; data begin. </td><td class="markdownTableBodyNone">Allocate a buffer in the memory buffer. If possible, the buffer is allocated starting with an offset in the data buffer. The existing buffer content is lost.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#gaa04531caf208df1bd8cc5cc920382f85">zb_buf_alloc_left(bufid, size)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>size</code> &ndash; size to allocate. </td><td class="markdownTableBodyNone">void <code>*data</code> &ndash; data begin. </td><td class="markdownTableBodyNone">Extend the currently allocated buffer to the left. Commonly used for allocating a buffer for a packet header.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga3be3fececb70e81b7541a47e915fafc2">zb_buf_alloc_right(bufid, size)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>size</code> &ndash; size to allocate. </td><td class="markdownTableBodyNone">void <code>*data</code> &ndash; data begin. </td><td class="markdownTableBodyNone">Extend the currently allocated buffer to the right. Commonly used for allocating a buffer for a packet tail.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga1a650530bd2e6d2486a5017b885ff292">zb_buf_cut_left(bufid, size)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>size</code> &ndash; size to cut. </td><td class="markdownTableBodyNone">void <code>*data</code> &ndash; data begin. </td><td class="markdownTableBodyNone">Cut a buffer beginning. This macro is normally used for cutting a packet header.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga68fc67e31e64f6549df59ae20ac0af3e">zb_buf_cut_right(bufid, size)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>size</code> &ndash; size to cut. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Cut a buffer ending. This macro is usually used for cutting a packet tail.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#gaf7e0718a3bb63059a2626ac98b54d65d">ZB_BUF_GET_PARAM(bufid, type)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID.<br  />
<code>type</code> &ndash; requested parameter type. </td><td class="markdownTableBodyNone"><code>type</code> <code>*ptr</code> &ndash; pointer to the parameters. </td><td class="markdownTableBodyNone">Get a pointer to the structured parameters. The parameters are stored at the tail of the data buffer.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga15f7d1e99e61284da1fa3ddb7f725450">zb_buf_reuse(bufid)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Get the specified IN or OUT buffer, clear all the data, and prepare the buffer for further usage. The buffer does not change its type: if it was an IN buffer, it remains an IN buffer after the procedure.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga788a473df6d535c19f5da0d142d4fa01">zb_buf_free(bufid)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Release a memory buffer.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga252f09a403d23347b2d4987a4d8d1833">zb_buf_get()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a> <code>bufid</code> &ndash; memory buffer ID </td><td class="markdownTableBodyNone">Get an IN buffer from the buffer pool. If no buffer is available, return <code>NULL</code>. If possible, use the <a class="el" href="group__buf.html#gad0f373a65f012c04317b6a602823e2aa">zb_buf_get_in_delayed(callback)</a> instead.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#gad0f373a65f012c04317b6a602823e2aa">zb_buf_get_in_delayed(callback)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>callback</code> &ndash; pointer to a callback function. </td><td class="markdownTableBodyNone"><code>RET_OK</code> or error code. </td><td class="markdownTableBodyNone">Get an IN buffer from the buffer pool; call the specified callback when the buffer is available.<br  />
If the buffer is available, schedule the callback for execution immediately. Otherwise, wait until a buffer is available and then execute the callback.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga284f25d25ef8a911d00dc79bea80ce42">zb_buf_get_out_delayed(callback)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>callback</code> &ndash; pointer to a callback function. </td><td class="markdownTableBodyNone"><code>RET_OK</code> or error code. </td><td class="markdownTableBodyNone">Get an OUT buffer from the buffer pool; call the specified callback when the buffer is available.<br  />
If the buffer is available, schedule the callback for execution immediately. Otherwise, wait until a buffer is available and then execute the callback.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga3e1aadf51fc1f01efe2663c442bc1a73">zb_buf_get_out_delayed_ext(callback, arg, max_size)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gaf1875e586b8f0ab199928a34d7c061a9">zb_callback2_t</a> <code>callback</code> &ndash; pointer to a callback function.<br  />
<a class="el" href="group__base__types.html#ga83793366ad4d54e8b65840d82a751498">zb_uint16_t</a> <code>arg</code> &ndash; to be passed to callback.<br  />
<a class="el" href="group__base__types.html#gaa0617d5f95ca24aef1c8ebf176eea245">zb_uint_t</a> <code>max_size</code> &ndash; required maximum buffer payload size </td><td class="markdownTableBodyNone"><code>RET_OK</code> or error code </td><td class="markdownTableBodyNone">Get an OUT buffer from the buffer pool. The behavior is the same as with <a class="el" href="group__buf.html#ga284f25d25ef8a911d00dc79bea80ce42">zb_buf_get_out_delayed()</a>, but a user parameter is passed to the callback as the second argument alongside the allocated buffer. Call this macro to use extended buffers.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__buf.html#ga2ca8f9478335d866bc798676906f18f0">zb_buf_get_in_delayed_ext(callback, arg, max_size)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>callback</code> &ndash; pointer to a callback function.<br  />
<a class="el" href="group__base__types.html#ga83793366ad4d54e8b65840d82a751498">zb_uint16_t</a> <code>arg</code> &ndash; to be passed to callback.<br  />
<a class="el" href="group__base__types.html#gaa0617d5f95ca24aef1c8ebf176eea245">zb_uint_t</a> <code>max_size</code> &ndash; required maximum buffer payload size </td><td class="markdownTableBodyNone"><code>RET_OK</code> or error code. </td><td class="markdownTableBodyNone">Get an IN buffer from the buffer pool; call the specified callback when the buffer is available.<br  />
If the buffer is available, schedule the callback for execution immediately. Otherwise, wait until a buffer is available and then execute the callback. Call this macro to use extended buffers.  </td></tr>
</table>
<center><b>Memory management API calls</b></center><h2><a class="anchor" id="zigbee_time"></a>
Time subsystem</h2>
<p>The time subsystem is based on the hardware timer. It uses the special type <a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a>, defined in the stack API. The time value is stored in ticks. Each tick is equal to one "beacon interval" (15.36 ms). The size of the <a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> type depends on the platform. The overflow is handled by the <a class="el" href="group__time.html">Time API</a>.</p>
<p>The Time API provides the ability to:</p><ul>
<li>Get the current value of the timer.</li>
<li>Compare two timestamps with "more or equal" operator (&gt;=).</li>
<li>Add or subtract timestamps.</li>
<li>Convert beacon intervals to milliseconds and vice versa.</li>
</ul>
<p>The following table lists the available time API macros.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Parameters </th><th class="markdownTableHeadNone">Return value </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga80916ed3054709e3c6b1bbde86123a46">ZB_TIMER_GET()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>time</code>  </td><td class="markdownTableBodyNone">Get current timer value in beacon intervals.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga42bb1a4699540dac69f109a07220dfd0">ZB_TIME_SUBTRACT(a, b)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>a</code> &ndash; time value.<br  />
<a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>b</code> &ndash; time value to subtract. </td><td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>time</code> &ndash; subtraction result. </td><td class="markdownTableBodyNone">Subtract time value: <code>a</code> - <code>b</code>.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga6cf01c4eef380f9db0505445cf7af489">ZB_TIME_ADD(a, b)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>a</code> &ndash; time value.<br  />
<a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>b</code> &ndash; time value. </td><td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a> <code>time</code> &ndash; addition result. </td><td class="markdownTableBodyNone">Add time values: <code>a</code> + <code>b</code>.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga3d15212ace17320ab05b3e8ea7898d82">ZB_TIME_GE(a, b)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__sched.html#gac77cf2f969243abf27172c7ddb0f376d">zb_callback_t</a> <code>func</code> &ndash; first time value to compare.<br  />
<a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>param</code> &ndash; second time value to compare. </td><td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#ga31ddce10b950c4f30d546945beabdcbc">ZB_TRUE</a> if <code>a</code> ≥ <code>b</code>, <a class="el" href="group__base__types.html#gae0f2d2d69ee138eedec4460449f84431">ZB_FALSE</a> otherwise. </td><td class="markdownTableBodyNone">Compare time value <code>a</code> and value <code>b</code>, check if <code>a</code> ≥ <code>b</code>.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga0b55ee2d596a314bb6e985149c17cdad">ZB_TIME_ONE_SECOND</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>time</code> &ndash; one second timeout. </td><td class="markdownTableBodyNone">Constant: one second in beacon intervals.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__time.html#gafb4445aba67a2058edd704b6e1e06e64">ZB_MILLISECONDS_TO_BEACON_INTERVAL(ms)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#ga83793366ad4d54e8b65840d82a751498">zb_uint16_t</a> <code>ms</code> &ndash; number of milliseconds to convert. </td><td class="markdownTableBodyNone"><a class="el" href="group__time.html#ga7e387d760d40077ec38875a65366b343">zb_time_t</a> <code>time</code> &ndash; timeout in ms. </td><td class="markdownTableBodyNone">Convert time from milliseconds to beacon intervals.  </td></tr>
</table>
<center><b>Time API calls</b></center><hr  />
<h1><a class="anchor" id="zigbee_debugging"></a>
Debugging</h1>
<p>The Zigbee stack provides <a class="el" href="group___z_b___t_r_a_c_e.html">API for tracing capabilities</a> for customer support purposes. The stack outputs a hex-encoded binary trace through the <a href="https://infocenter.nordicsemi.com/topic/sdk_nrf5_v16.0.0/group__nrf__log.html" target="_blank">Logger module</a>. The binary trace log cannot be decoded with the provided SDK. However, the Nordic support team can use it to find stack-level issues .</p>
<p>You can enable or disable tracing for a particular subsystem, and define the level of tracing. In addition, the stack is able to trace Zigbee input and output traffic (in/out) on the MAC level.</p>
<p>The trace mask enables or disables trace messages for the whole subsystem: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Value </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TRACE_SUBSYSTEM_APP </td><td class="markdownTableBodyNone">0x0800 </td><td class="markdownTableBodyNone">Application.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TRACE_SUBSYSTEM_ZDO </td><td class="markdownTableBodyNone">0x0040 </td><td class="markdownTableBodyNone">ZDO subsystem.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TRACE_SUBSYSTEM_ZCL </td><td class="markdownTableBodyNone">0x0010 </td><td class="markdownTableBodyNone">APS subsystem.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TRACE_SUBSYSTEM_NWK </td><td class="markdownTableBodyNone">0x0008 </td><td class="markdownTableBodyNone">NWK subsystem.  </td></tr>
</table>
<center><b>Trace masks</b></center><p>Tracing is controlled by the trace level and the trace mask. The trace level defines the importance of the message from 1 to 4: 1 is the most important, 4 is the least important. Setting the trace level to 1 blocks all the messages except those with the highest priority. If an application sets the trace level to 4, all trace messages are allowed to print.</p>
<p>The provided tracing subsystem is disabled by default. Use the following tracing API to manage tracing.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Parameters </th><th class="markdownTableHeadNone">Return value </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group___z_b___t_r_a_c_e.html#ga6ddecefbf258b8625815186365e556f7">ZB_SET_TRACE_LEVEL(level)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>level</code> &ndash; trace level. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Set trace level.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group___z_b___t_r_a_c_e.html#ga8ca8c429c2afc676828087b0c951d177">ZB_SET_TRACE_MASK(mask)</a> </td><td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a> <code>mask</code> &ndash; trace mask. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Set trace mask.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group___z_b___t_r_a_c_e.html#gad1a739d90a215e3e2aa5278213533f9d">ZB_SET_TRACE_ON()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Enable trace.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group___z_b___t_r_a_c_e.html#ga5fbc54aafd04cfa97bbe2323787e9f6a">ZB_SET_TRACE_OFF()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Disable trace.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group___d_u_m_p___o_n___o_f_f.html#gaad67e1bbffc69b31b72e12497c17ed42">ZB_SET_TRAF_DUMP_ON()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Enable dump.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group___d_u_m_p___o_n___o_f_f.html#ga1b63623031fda1a1405f0c47496e1e98">ZB_SET_TRAF_DUMP_OFF()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Disable dump.  </td></tr>
</table>
<center><b>Trace API calls</b></center><hr  />
<h1><a class="anchor" id="zigbee_power_optimization"></a>
Power saving feature</h1>
<p>The ZBOSS stack informs the application about how long its scheduler is empty by using the signal handler's ZB_COMMON_SIGNAL_CAN_SLEEP.</p>
<p>The mechanism starts with the scheduler that tracks the callback queue (see <a class="el" href="zigbee_prog_principles.html#zigbee_multitasking">Zigbee stack multitasking (scheduler)</a>). If there is no immediate callback for the execution and there is no outgoing packet on the MAC level, a special signal <a class="el" href="group__zb__comm__signals.html#gae4c50bae666f2c4dd8ac710481856a6e">ZB_COMMON_SIGNAL_CAN_SLEEP</a> is sent to the application. This signal is sent when the ZBOSS scheduler is empty for some time, and it is sent regardless of the device role. It has a sleep time parameter that specifies the allowed sleep duration in milliseconds.</p>
<p>Upon receiving the signal, the application checks its internal state and decides whether to enter the sleep mode or not. To switch to the sleep mode, the application must call the <a class="el" href="group__sleep__api.html#ga0cf2fbac3d63cb53ded5a1860c845f70">zb_sleep_now()</a> function.</p>
<p>After calling <a class="el" href="group__sleep__api.html#ga0cf2fbac3d63cb53ded5a1860c845f70">zb_sleep_now()</a>, the stack prepares its peripherals for sleep, and informs the application that it is ready to go to sleep with a call to <code><a class="el" href="group__special__nordic__functions.html#ga8f95926ba5ca5b40b1be9a55864c25a1" title="Function which tries to put the device into deep sleep mode, caused by an empty Zigbee stack schedule...">zb_osif_sleep()</a></code>. The sleep duration value is based on the time remaining before the first alarm is called, and it is longer for the <a class="el" href="zigbee_prog_principles.html#zigbee_power_optimization_sleepy">sleepy end device</a>.</p>
<p>The application can use <a class="el" href="group__sleep__api.html#gaad0eff89b2a0ea803f70d7888bea355e">zb_sleep_set_threshold()</a> to set the minimum sleep duration value, which reduces the number of the triggered <a class="el" href="group__zb__comm__signals.html#gae4c50bae666f2c4dd8ac710481856a6e">ZB_COMMON_SIGNAL_CAN_SLEEP</a> signals. If the sleep duration is lower than the specified threshold, the signal is not triggered. By default, the value of the sleep duration threshold <code>ZB_SCHED_SLEEP_THRESHOLD_MS</code> is set to 20 ms. The upper limit for this value is 86400000 ms (one day).</p>
<dl class="section user"><dt>APIs</dt><dd>The following table provides an overview of the power saving sleep API. <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Parameters </th><th class="markdownTableHeadNone">Return value </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a> <a class="el" href="group__sleep__api.html#gaad0eff89b2a0ea803f70d7888bea355e">zb_sleep_set_threshold(zb_uint32_t threshold_ms)</a> </td><td class="markdownTableBodyNone"><code>threshold_ms</code> -– sleep threshold value in milliseconds. </td><td class="markdownTableBodyNone">RET_OK &ndash; If the interval is successfully set.<br  />
RET_ERROR &ndash; Otherwise. </td><td class="markdownTableBodyNone">Set threshold value.<br  />
By default, set to <code>ZB_SCHED_SLEEP_THRESHOLD_MS</code> (20 ms).  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="group__base__types.html#ga964947a10fa0ad0bd6df7bd91ecfac9c">zb_uint32_t</a> <a class="el" href="group__sleep__api.html#gaab7fc1cf39580877f846941c291a5326">zb_get_sleep_threshold()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Currently used threshold value. </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="group__sleep__api.html#ga0cf2fbac3d63cb53ded5a1860c845f70">zb_sleep_now()</a> </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">None. </td><td class="markdownTableBodyNone">Immediately put the device into sleep mode. This call is permitted only in signal handler when application receives the ZB_COMMON_SIGNAL_CAN_SLEEP signal.  </td></tr>
</table>
<center><b>Power saving sleep API calls</b></center></dd></dl>
<h2><a class="anchor" id="zigbee_power_optimization_sleepy"></a>
Configuring sleepy behavior for end devices</h2>
<p>To enable the sleepy behavior on an end device, make sure your application calls the <a class="el" href="group__zb__general__set.html#ga6880473f802a340c6702e8c91f8ac606">zb_set_rx_on_when_idle()</a> function with the <code>ZB_FALSE</code> parameter, but before starting the ZBOSS stack. This function specifies whether the device should have the radio disabled between the polls to parent.</p>
<p>As a result, during the preparation of peripherals for sleep, the stack will additionally turn off Sleepy End device radio and its own timer.</p>
<hr  />
<h1><a class="anchor" id="zigbee_keep_alive_mechanism"></a>
End device keep alive</h1>
<p>All end devices (including <code>RxOnWhenIdle=TRUE</code>) that have received an End Device Timeout Response Command with a status SUCCESS can periodically send keep alive messages to their router parent to ensure they remain in the router’s neighbor table.</p>
<p>You can configure the end device timeout period with <a class="el" href="group__zb__general__set.html#gaf8e3a6e219eba542ddd1ef8dc361149d">zb_set_ed_timeout</a>. The default timeout that is set in <code>NWK_ED_DEVICE_TIMEOUT_DEFAULT</code> equals 256 minutes. If the parent does not receive any keep alive messages from the child during this period, it deletes the child from the neighbor table.</p>
<p>The period for sending the keep alive to the router parent must be determined by the manufacturer of the device and is not specified by the standard. It is recommended to set this period in such a way that the end device sends by default 3 keep alive messages during the End Device Timeout period. The application can use <a class="el" href="group__zb__general__set.html#gafb20d6f762d98096ab34e3c98f772584">zb_set_keepalive_timeout</a> to configure how often the keep alive message is sent.</p>
<p>The keep alive method that the end device uses depends on the support of the router parent. It can be MAC data poll keep alive (which is the most common option), or End Device Timeout Request keep alive.</p>
<p>If the router parent supports the MAC data poll keep alive, the keep alive configuration may conflict with the Long Poll configuration. This happens when the application changes the Long Poll interval using the Poll Control Cluster API or using <a class="el" href="group__zdo__poll__control.html#ga3aae8929b30e71c872f937771b89c768">zb_zdo_pim_set_long_poll_interval</a>. It is recommended to set the Long Poll interval to a value smaller than ((End Device Timeout period) / 3) to avoid unexpected device aging.</p>
<p>If the router parent supports the End Device Timeout Request keep alive, then the device sends an End Device Timeout Request command as a unicast and waits for an End Device Timeout Response from its parent, according to the configured Keep Alive Timeout.</p>
<hr  />
<h1><a class="anchor" id="zigbee_data_polling_mechanism"></a>
Data polling mechanism</h1>
<p>The polling intervals can be configured by the Poll control ZCL cluster commands or by <a class="el" href="group__zdo__poll__control.html#ga3aae8929b30e71c872f937771b89c768">zb_zdo_pim_set_long_poll_interval</a>.</p>
<p>There are two standard polling presets:</p><ul>
<li>Long poll – with 5-second intervals by default with <a class="el" href="group___z_b___c_o_n_f_i_g.html#ga1657a3b206e4ac178b8ff766ab2c4bdb">ZB_PIM_DEFAULT_LONG_POLL_INTERVAL</a>. This value can be changed during the keep alive configuration.</li>
<li>Short poll – with 0.5-second intervals by default with <a class="el" href="group___z_b___c_o_n_f_i_g.html#gaecfc4f9318b16f7fa4c5d969b22dce89">ZB_PIM_DEFAULT_FAST_POLL_INTERVAL</a>.</li>
</ul>
<p>The device always uses the long poll preset, unless there is an ongoing communication that requires a higher packet exchange rate.</p>
<h2><a class="anchor" id="zigbee_data_polling_mechanism_turbo"></a>
Turbo poll</h2>
<p>The turbo poll is a ZBOSS extension that allows to temporary increase the poll rate when ZED is awaiting an answer from the parent. This is useful for actions when you know either the exact number of packets to be received or the time period when these packets are expected to be received.</p>
<p>The extension implements an adaptive algorithm that lowers the poll interval to the configured value and raises it gradually up to the long poll interval when the parent is not responding. The turbo poll can be enabled and disabled by <a class="el" href="group__zdo__poll__control.html#gaed85d8a19e033a965310c4e7bd820c88">zb_zdo_pim_permit_turbo_poll</a>.</p>
<p>When the turbo poll is enabled, it starts automatically for the specified number of packets when one of the following conditions is met:</p><ul>
<li>ZED sends a command that should be acknowledged on the APS layer.</li>
<li>TCLK transmission error occurred.</li>
<li>ZDO or ZCL command expects a response.</li>
</ul>
<p>In each of these cases, the turbo poll uses the adaptive algorithm until the expected number of packets is received.</p>
<p>The application can start the turbo poll for the specified number of packets by calling <a class="el" href="group__zdo__poll__control.html#gad7ee4f0d6c2797a729a48b5a1ce7b8a5">zb_zdo_pim_start_turbo_poll_packets</a>.</p>
<p>The turbo poll can also be forced for a certain period of time by calling <a class="el" href="group__zdo__poll__control.html#gad04f6311aa4b1e73544cb65a9e87e619">zb_zdo_pim_start_turbo_poll_continuous</a>, and stopped by calling <a class="el" href="group__zdo__poll__control.html#gad468477974b338e6f3ade81e99cb0875">zb_zdo_pim_turbo_poll_continuous_leave</a> when the application expects multiple packets during this period. In this case, the turbo poll uses the adaptive algorithm until the timeout expiration. For instance, the application may enable the turbo poll during the initial configuration of Sleepy End Device to speed up the communication process.</p>
<hr  />
<h1><a class="anchor" id="zigbee_production_config"></a>
Production configuration</h1>
<p>Zigbee stack includes a production configuration block feature. This block is useful for per-device customization and is supposed to be written at device production time. The size of the production block must not exceed 128 bytes.</p>
<p>The production configuration block:</p><ul>
<li>Is created dynamically during the build process. You can check the partition addresses in the <code>build/zephyr/include/generated/pm_config.h</code> file. To place the production config partition at a specific address, use static configuration. For more information, see <a href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/nrf/scripts/partition_manager/partition_manager.html" target="_blank">Partition Manager</a> in the nRF Connect SDK documentation.</li>
<li>Is not directly visible to the application. Zigbee stack reads it during initialization and sets its internal parameters.</li>
<li>Must be written to the flash before launching the application.</li>
</ul>
<p>The block is loaded at the very start of <a class="el" href="group__zb__general__main__loop.html#gab9f8bb77c5348ee1dea12ec1026517b1">zboss_main_loop_iteration()</a>, so it rewrites all the corresponding data from NVRAM.</p>
<p>The production configuration block has a system part and an optional application-specific part:</p><ul>
<li>The Zigbee stack applies the system part internally.</li>
<li>The application can handle its specific part by receiving the <a class="el" href="group__zb__comm__signals.html#ga3eb4631c12c345991be2461566c150e9">ZB_ZDO_SIGNAL_PRODUCTION_CONFIG_READY</a> signal that carries the neccessary information needed for the application to proceed. <div class="fragment"><div class="line"><span class="keywordflow">case</span> <a class="code" href="group__zb__comm__signals.html#ga3eb4631c12c345991be2461566c150e9">ZB_ZDO_SIGNAL_PRODUCTION_CONFIG_READY</a>:</div>
<div class="line">    <span class="keywordflow">if</span> (status != <a class="code" href="group__error__codes.html#ga76117585e8ddc62f21ca0e3061b7830e">RET_OK</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Production config is not present or invalid */</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__base__types.html#ga964947a10fa0ad0bd6df7bd91ecfac9c">zb_uint32_t</a> app_data_length = <a class="code" href="group__buf.html#ga4c187cf4fb6d5edbbb400bff57f6073e">zb_buf_len</a>(param) - <span class="keyword">sizeof</span>(<a class="code" href="group__zb__comm__signals.html#ga39260b983d0f1c9e49e3f81229f89843">zb_zdo_app_signal_hdr_t</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (app_data_length != 0)</div>
<div class="line">        {</div>
<div class="line">            example_application_config_t * ex_cfg = <a class="code" href="group__zb__comm__signals.html#ga349e075e41b65290d2b1547f200a4e23">ZB_ZDO_SIGNAL_GET_PARAMS</a>(p_sg_p, example_application_config_t);</div>
<div class="line">            process_example_application_config(ex_cfg);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
</div><!-- fragment --></li>
</ul>
<p>Data that can be placed into the system part of the production configuration block includes:</p><ul>
<li>802.15.4 channel mask</li>
<li>Device IEEE address</li>
<li>Definition of the maximum TX power per channel per page</li>
<li>Install code of the device</li>
</ul>
<p>Moreover, the data specific to your application can be placed in the application part of the production configuration block.</p>
<dl class="section note"><dt>Note</dt><dd>- The size of the application block of production configuration is limited to 74 bytes for first version of production config. It may change across versions because newer versions of the production configuration may include additional data. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__base__types_html_gaa82a9657ef11a3947586065cf8066256"><div class="ttname"><a href="group__base__types.html#gaa82a9657ef11a3947586065cf8066256">zb_uint8_t</a></div><div class="ttdeci">unsigned char zb_uint8_t</div><div class="ttdoc">Project-local 1-byte unsigned int type.</div><div class="ttdef"><b>Definition:</b> zb_types.h:147</div></div>
<div class="ttc" id="agroup__base__types_html_ga7bdda62719777b9e47b1d7204669f897"><div class="ttname"><a href="group__base__types.html#ga7bdda62719777b9e47b1d7204669f897">zb_ret_t</a></div><div class="ttdeci">zb_int32_t zb_ret_t</div><div class="ttdoc">Return type for ZB functions returning execution status.</div><div class="ttdef"><b>Definition:</b> zb_errors.h:33</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_ga03ab4c87fbcc7cf8e12bbfa9cb8a3be6"><div class="ttname"><a href="group__zb__comm__signals.html#ga03ab4c87fbcc7cf8e12bbfa9cb8a3be6">zb_get_app_signal</a></div><div class="ttdeci">zb_zdo_app_signal_type_t zb_get_app_signal(zb_uint8_t param, zb_zdo_app_signal_hdr_t **sg_p)</div><div class="ttdoc">Unpack application signal buffer in zboss_signal_handler()</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_ga92b8d5cdf1c243e1c47e72fbd0e14083"><div class="ttname"><a href="group__zb__comm__signals.html#ga92b8d5cdf1c243e1c47e72fbd0e14083">ZB_GET_APP_SIGNAL_STATUS</a></div><div class="ttdeci">#define ZB_GET_APP_SIGNAL_STATUS(param)</div><div class="ttdoc">Get status from the application signal.</div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:1536</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_ga8de605f3e2666ce3d6ea3b5419f73dc9"><div class="ttname"><a href="group__zb__comm__signals.html#ga8de605f3e2666ce3d6ea3b5419f73dc9">ZB_ZDO_SIGNAL_DEFAULT_START</a></div><div class="ttdeci">#define ZB_ZDO_SIGNAL_DEFAULT_START</div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:140</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_gab55565980ef0580712f8dc160b01ea06"><div class="ttname"><a href="group__zb__comm__signals.html#gab55565980ef0580712f8dc160b01ea06">ZB_BDB_SIGNAL_DEVICE_FIRST_START</a></div><div class="ttdeci">#define ZB_BDB_SIGNAL_DEVICE_FIRST_START</div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:233</div></div>
<div class="ttc" id="agroup__base__types_html_ga964947a10fa0ad0bd6df7bd91ecfac9c"><div class="ttname"><a href="group__base__types.html#ga964947a10fa0ad0bd6df7bd91ecfac9c">zb_uint32_t</a></div><div class="ttdeci">unsigned int zb_uint32_t</div><div class="ttdoc">Project-local 4-byte unsigned int type.</div><div class="ttdef"><b>Definition:</b> zb_types.h:176</div></div>
<div class="ttc" id="agroup__sched_html_ga27e890246162c45f4d8ad45350e2c912"><div class="ttname"><a href="group__sched.html#ga27e890246162c45f4d8ad45350e2c912">ZB_SCHEDULE_APP_CALLBACK</a></div><div class="ttdeci">#define ZB_SCHEDULE_APP_CALLBACK(func, param)</div><div class="ttdef"><b>Definition:</b> zboss_api_core.h:319</div></div>
<div class="ttc" id="agroup__sched_html_ga80106ad089597d7c4d1530aa760af7f1"><div class="ttname"><a href="group__sched.html#ga80106ad089597d7c4d1530aa760af7f1">ZB_SCHEDULE_APP_ALARM</a></div><div class="ttdeci">#define ZB_SCHEDULE_APP_ALARM(func, param, timeout_bi)</div><div class="ttdef"><b>Definition:</b> zboss_api_core.h:370</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_ga3eb4631c12c345991be2461566c150e9"><div class="ttname"><a href="group__zb__comm__signals.html#ga3eb4631c12c345991be2461566c150e9">ZB_ZDO_SIGNAL_PRODUCTION_CONFIG_READY</a></div><div class="ttdeci">#define ZB_ZDO_SIGNAL_PRODUCTION_CONFIG_READY</div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:548</div></div>
<div class="ttc" id="agroup__zb__general__start_html_ga2d56595208dc8b6383ed99ee96b03d5c"><div class="ttname"><a href="group__zb__general__start.html#ga2d56595208dc8b6383ed99ee96b03d5c">ZB_INIT</a></div><div class="ttdeci">#define ZB_INIT(trace_comment)</div><div class="ttdef"><b>Definition:</b> zboss_api.h:500</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_ga39260b983d0f1c9e49e3f81229f89843"><div class="ttname"><a href="group__zb__comm__signals.html#ga39260b983d0f1c9e49e3f81229f89843">zb_zdo_app_signal_hdr_t</a></div><div class="ttdeci">struct zb_zdo_app_signal_hdr_s zb_zdo_app_signal_hdr_t</div></div>
<div class="ttc" id="agroup__zb__general__start_html_ga31b4d46033aaf6a400409d03bd40d392"><div class="ttname"><a href="group__zb__general__start.html#ga31b4d46033aaf6a400409d03bd40d392">zboss_start</a></div><div class="ttdeci">zb_ret_t zboss_start(void)</div><div class="ttdoc">ZBOSS start function.</div></div>
<div class="ttc" id="agroup__error__codes_html_ga76117585e8ddc62f21ca0e3061b7830e"><div class="ttname"><a href="group__error__codes.html#ga76117585e8ddc62f21ca0e3061b7830e">RET_OK</a></div><div class="ttdeci">#define RET_OK</div><div class="ttdoc">Error codes for non-void stack functions. In general, function can return OK, BLOCKED or some error....</div><div class="ttdef"><b>Definition:</b> zb_errors.h:79</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_gab2b9e7a13fd471d7bb642655d825a04e"><div class="ttname"><a href="group__zb__comm__signals.html#gab2b9e7a13fd471d7bb642655d825a04e">ZB_ZDO_SIGNAL_SKIP_STARTUP</a></div><div class="ttdeci">#define ZB_ZDO_SIGNAL_SKIP_STARTUP</div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:163</div></div>
<div class="ttc" id="agroup__time_html_ga0b55ee2d596a314bb6e985149c17cdad"><div class="ttname"><a href="group__time.html#ga0b55ee2d596a314bb6e985149c17cdad">ZB_TIME_ONE_SECOND</a></div><div class="ttdeci">#define ZB_TIME_ONE_SECOND</div><div class="ttdef"><b>Definition:</b> zboss_api_core.h:172</div></div>
<div class="ttc" id="astructzb__zdo__app__signal__hdr__s_html"><div class="ttname"><a href="structzb__zdo__app__signal__hdr__s.html">zb_zdo_app_signal_hdr_s</a></div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:1486</div></div>
<div class="ttc" id="agroup__zb__general__main__loop_html_gab9f8bb77c5348ee1dea12ec1026517b1"><div class="ttname"><a href="group__zb__general__main__loop.html#gab9f8bb77c5348ee1dea12ec1026517b1">zboss_main_loop_iteration</a></div><div class="ttdeci">void zboss_main_loop_iteration(void)</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_gae05c0ff285cfd03e0997fe438e8047fc"><div class="ttname"><a href="group__zb__comm__signals.html#gae05c0ff285cfd03e0997fe438e8047fc">zboss_signal_handler</a></div><div class="ttdeci">void zboss_signal_handler(zb_uint8_t param)</div></div>
<div class="ttc" id="agroup__buf_html_ga788a473df6d535c19f5da0d142d4fa01"><div class="ttname"><a href="group__buf.html#ga788a473df6d535c19f5da0d142d4fa01">zb_buf_free</a></div><div class="ttdeci">#define zb_buf_free(buf)</div><div class="ttdoc">Free packet buffer and put it into free list.</div><div class="ttdef"><b>Definition:</b> zboss_api_buf.h:344</div></div>
<div class="ttc" id="agroup__buf_html_ga4c187cf4fb6d5edbbb400bff57f6073e"><div class="ttname"><a href="group__buf.html#ga4c187cf4fb6d5edbbb400bff57f6073e">zb_buf_len</a></div><div class="ttdeci">#define zb_buf_len(buf)</div><div class="ttdef"><b>Definition:</b> zboss_api_buf.h:372</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_ga349e075e41b65290d2b1547f200a4e23"><div class="ttname"><a href="group__zb__comm__signals.html#ga349e075e41b65290d2b1547f200a4e23">ZB_ZDO_SIGNAL_GET_PARAMS</a></div><div class="ttdeci">#define ZB_ZDO_SIGNAL_GET_PARAMS(sg_p, type)</div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:1109</div></div>
<div class="ttc" id="agroup__buf_html_ga72fb48e56b8e7f4b0cf12d12bd491b3b"><div class="ttname"><a href="group__buf.html#ga72fb48e56b8e7f4b0cf12d12bd491b3b">zb_bufid_t</a></div><div class="ttdeci">zb_uint8_t zb_bufid_t</div><div class="ttdef"><b>Definition:</b> zboss_api_buf.h:178</div></div>
<div class="ttc" id="agroup__zb__comm__signals_html_ga3e9d86f42d2c6c27240f423a40fb152b"><div class="ttname"><a href="group__zb__comm__signals.html#ga3e9d86f42d2c6c27240f423a40fb152b">ZB_BDB_SIGNAL_DEVICE_REBOOT</a></div><div class="ttdeci">#define ZB_BDB_SIGNAL_DEVICE_REBOOT</div><div class="ttdef"><b>Definition:</b> zboss_api_zdo.h:253</div></div>
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Thu Nov 14 2024" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>
